# GPT 自然語言查詢功能

本功能允許使用者透過 LINE 聊天機器人向「服事提醒小天使」提出自然語言問題，系統會將 Google Sheet 中的服事資料和用戶資料提供給 GPT 作為上下文，讓 GPT 可以根據這些資料來回答問題。

## 功能說明

1. 使用者可以透過在訊息前加上「小天使, 」來詢問任何服事相關的問題
2. 系統會將使用者的問題和服事資料提供給 GPT
3. GPT 會根據提供的資料生成回答，並且回傳給使用者

## 設定步驟

1. 獲取 OpenAI API 金鑰
   - 前往 [OpenAI Platform](https://platform.openai.com/) 建立帳號
   - 在儀表板中生成 API 金鑰

2. 將 API 金鑰設定到環境變數
   - 在 `.env` 檔案中添加以下設定：
   ```
   OPENAI_API_KEY=你的_API_金鑰
   ```

3. 安裝所需套件
   ```
   pip install -r requirements.txt
   ```

## 使用方式

使用者只需在 LINE 聊天中輸入以「小天使, 」開頭的訊息，例如：

- "小天使, 我今年還有哪些服事？"
- "小天使, 下週日的詩歌敬拜是誰負責？"
- "小天使, 請幫我解釋讀經服事的內容"
- "小天使, 我可以如何準備敬拜服事？"

## 技術實現

1. 使用 `gpt_lib.py` 中的 `GptLib` 類別處理與 GPT 的互動
2. 從 Google Sheet 獲取服事資料和使用者資料作為上下文
3. 使用 GPT-4 模型生成回答

## 注意事項

1. 確保 OpenAI API 金鑰有足夠的額度
2. GPT 回應可能會消耗較多的 API 額度，請合理規劃使用
3. 確保 Google Sheet 中的資料格式正確，以便系統可以正確解析

## 故障排除

如果遇到問題：

1. 檢查環境變數是否正確設定
2. 檢查 API 金鑰是否有效
3. 檢查 Google Sheet 資料格式是否正確
4. 查看日誌文件了解詳細錯誤訊息
